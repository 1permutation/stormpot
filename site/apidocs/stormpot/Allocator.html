<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_51) on Fri Mar 14 20:16:18 CET 2014 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>Allocator (stormpot 2.2 API)</title>
<meta name="date" content="2014-03-14">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Allocator (stormpot 2.2 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Allocator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../stormpot/BlazePool.html" title="class in stormpot"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?stormpot/Allocator.html" target="_top">Frames</a></li>
<li><a href="Allocator.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">stormpot</div>
<h2 title="Interface Allocator" class="title">Interface Allocator&lt;T extends <a href="../stormpot/Poolable.html" title="interface in stormpot">Poolable</a>&gt;</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl><dt><span class="strong">Type Parameters:</span></dt><dd><code>T</code> - any type that implements Poolable.</dd></dl>
<dl>
<dt>All Known Subinterfaces:</dt>
<dd><a href="../stormpot/Reallocator.html" title="interface in stormpot">Reallocator</a>&lt;T&gt;</dd>
</dl>
<hr>
<br>
<pre>public interface <span class="strong">Allocator&lt;T extends <a href="../stormpot/Poolable.html" title="interface in stormpot">Poolable</a>&gt;</span></pre>
<div class="block">An Allocator is responsible for the creation and destruction of
 <a href="../stormpot/Poolable.html" title="interface in stormpot"><code>Poolable</code></a> objects.
 <p>
 This is where the objects in the Pool comes from. Clients of the Stormpot
 library needs to provide their own Allocator implementations.
 <p>
 Implementations of this interface must be thread-safe, because there is no
 knowing whether pools will try to access it concurrently or not. The easiest
 way to achieve this is to just make the
 <a href="../stormpot/Allocator.html#allocate(stormpot.Slot)"><code>allocate</code></a>
 and <a href="../stormpot/Allocator.html#deallocate(T)"><code>deallocate</code></a> methods synchronised,
 but this might cause problems for the pools ability to allocate objects fast
 enough, if they are very slow to construct. Pools might want to deal with
 very slow allocations by allocating in more than one thread, but
 synchronizing the <a href="../stormpot/Allocator.html#allocate(stormpot.Slot)"><code>allocate(Slot)</code></a> method will render that strategy
 ineffective.
 <p>
 A better approach to thread-safety is to not have any shared mutable state
 in the allocator, if at all possible.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Chris Vest &lt;mr.chrisvest@gmail.com&gt;</dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../stormpot/Reallocator.html" title="interface in stormpot"><code>Reallocator</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../stormpot/Allocator.html" title="type parameter in Allocator">T</a></code></td>
<td class="colLast"><code><strong><a href="../stormpot/Allocator.html#allocate(stormpot.Slot)">allocate</a></strong>(<a href="../stormpot/Slot.html" title="interface in stormpot">Slot</a>&nbsp;slot)</code>
<div class="block">Create a fresh new instance of T for the given slot.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../stormpot/Allocator.html#deallocate(T)">deallocate</a></strong>(<a href="../stormpot/Allocator.html" title="type parameter in Allocator">T</a>&nbsp;poolable)</code>
<div class="block">Deallocate, if applicable, the given Poolable and free any resources
 associated with it.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="allocate(stormpot.Slot)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allocate</h4>
<pre><a href="../stormpot/Allocator.html" title="type parameter in Allocator">T</a>&nbsp;allocate(<a href="../stormpot/Slot.html" title="interface in stormpot">Slot</a>&nbsp;slot)
                            throws <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Create a fresh new instance of T for the given slot.
 <p>
 The returned <a href="../stormpot/Poolable.html" title="interface in stormpot"><code>Poolable</code></a> must obey the contract that, when
 <a href="../stormpot/Poolable.html#release()"><code>Poolable.release()</code></a> is called on it, it must delegate
 the call onto the <a href="../stormpot/Slot.html#release(stormpot.Poolable)"><code>Slot.release(Poolable)</code></a> method of the here
 given slot object.
 <p>
 Exceptions thrown by this method may propagate out through the
 <a href="../stormpot/Pool.html#claim(stormpot.Timeout)"><code>claim</code></a> method of a pool, in the form of being
 wrapped inside a <a href="../stormpot/PoolException.html" title="class in stormpot"><code>PoolException</code></a>. Pools must be able to handle these
 exceptions in a sane manner, and are guaranteed to return to a working
 state if an Allocator stops throwing exceptions from its allocate method.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>slot</code> - The slot the pool wish to allocate an object for.
 Implementors do not need to concern themselves with the details of a
 pools slot objects. They just have to call release on them as the
 protocol demands.</dd>
<dt><span class="strong">Returns:</span></dt><dd>A newly created instance of T. Never <code>null</code>.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code> - If the allocation fails.</dd></dl>
</li>
</ul>
<a name="deallocate(stormpot.Poolable)">
<!--   -->
</a><a name="deallocate(T)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>deallocate</h4>
<pre>void&nbsp;deallocate(<a href="../stormpot/Allocator.html" title="type parameter in Allocator">T</a>&nbsp;poolable)
                throws <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Deallocate, if applicable, the given Poolable and free any resources
 associated with it.
 <p>
 This is an opportunity to close any connections or files, flush buffers,
 empty caches or what ever might need to be done to completely free any
 resources represented by this Poolable.
 <p>
 Note that a Poolable must never touch its slot object after it has been
 deallocated.
 <p>
 Pools, on the other hand, will guarantee that the same object is never
 deallocated more than once.
 <p>
 Note that pools will always silently swallow exceptions thrown by the
 deallocate method. They do this because there is no knowing whether the
 deallocation of an object will be done synchronously by a thread calling
 <a href="../stormpot/Poolable.html#release()"><code>release</code></a> on a Poolable, or asynchronously by
 a clean-up thread inside the pool.
 <p>
 Deallocation from the release of an expired object, and deallocation from
 the shut down procedure of a <a href="../stormpot/LifecycledPool.html" title="interface in stormpot"><code>LifecycledPool</code></a> behave the same way
 in this regard. They will both silently swallow any exception thrown.
 <p>
 On the other hand, pools are guaranteed to otherwise correctly deal with
 any exception that might be thrown. The shut down procedure will still
 complete, and release will still maintain the internal data structures of
 the pool to make the slot available for new allocations.
 <p>
 If you need to somehow specially deal with the exceptions thrown by the
 deallocation of objects, then you should do this in the allocator itself,
 or in a wrapper around your allocator.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>poolable</code> - The non-null Poolable instance to be deallocated.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code> - if the deallocation encounters an error.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Allocator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../stormpot/BlazePool.html" title="class in stormpot"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?stormpot/Allocator.html" target="_top">Frames</a></li>
<li><a href="Allocator.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2011-2014&#x2013;2014. All rights reserved.</small></p>
</body>
</html>
