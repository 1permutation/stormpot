<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_29) on Tue Mar 06 20:04:03 CET 2012 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
Allocator (stormpot 2.0 API)
</TITLE>

<META NAME="date" CONTENT="2012-03-06">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../javadocstyle.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Allocator (stormpot 2.0 API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/Allocator.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../stormpot/Completion.html" title="interface in stormpot"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../index.html?stormpot/Allocator.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Allocator.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
stormpot</FONT>
<BR>
Interface Allocator&lt;T extends <A HREF="../stormpot/Poolable.html" title="interface in stormpot">Poolable</A>&gt;</H2>
<DL>
<DT><DT><B>Type Parameters:</B><DD><CODE>T</CODE> - any type that implements Poolable.</DL>
<HR>
<DL>
<DT><PRE>public interface <B>Allocator&lt;T extends <A HREF="../stormpot/Poolable.html" title="interface in stormpot">Poolable</A>&gt;</B></DL>
</PRE>

<P>
An Allocator is responsible for the creation and destruction of
 <A HREF="../stormpot/Poolable.html" title="interface in stormpot"><CODE>Poolable</CODE></A> objects.
 <p>
 This is where the objects in the Pool comes from. Clients of the Stormpot
 library needs to provide their own Allocator implementations.
 <p>
 Implementations of this interface must be thread-safe, because there is no
 knowing whether pools will try to access it concurrently or not. Generally
 they will probably not access it concurrently, but since no guarantee can
 be provided one has expect that concurrent access might occur. The easiest
 way to achieve this is to just make the
 <A HREF="../stormpot/Allocator.html#allocate(stormpot.Slot)"><CODE>allocate</CODE></A>
 and <A HREF="../stormpot/Allocator.html#deallocate(T)"><CODE>deallocate</CODE></A> methods synchronised,
 or just not have any shared mutable state in the allocator.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Chris Vest &lt;mr.chrisvest@gmail.com&gt;</DD>
</DL>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../stormpot/Allocator.html" title="type parameter in Allocator">T</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../stormpot/Allocator.html#allocate(stormpot.Slot)">allocate</A></B>(<A HREF="../stormpot/Slot.html" title="interface in stormpot">Slot</A>&nbsp;slot)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create a fresh new instance of T for the given slot.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../stormpot/Allocator.html#deallocate(T)">deallocate</A></B>(<A HREF="../stormpot/Allocator.html" title="type parameter in Allocator">T</A>&nbsp;poolable)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Deallocate, if applicable, the given Poolable and free any resources
 associated with it.</TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="allocate(stormpot.Slot)"><!-- --></A><H3>
allocate</H3>
<PRE>
<A HREF="../stormpot/Allocator.html" title="type parameter in Allocator">T</A> <B>allocate</B>(<A HREF="../stormpot/Slot.html" title="interface in stormpot">Slot</A>&nbsp;slot)
                            throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</A></PRE>
<DL>
<DD>Create a fresh new instance of T for the given slot.
 <p>
 The returned <A HREF="../stormpot/Poolable.html" title="interface in stormpot"><CODE>Poolable</CODE></A> must obey the contract that, when
 <A HREF="../stormpot/Poolable.html#release()"><CODE>Poolable.release()</CODE></A> is called on it, it must delegate
 the call onto the <A HREF="../stormpot/Slot.html#release(stormpot.Poolable)"><CODE>Slot.release(Poolable)</CODE></A> method of the here
 given slot object.
 <p>
 RuntimeExceptions thrown by this method may propagate out through the
 <A HREF="../stormpot/Pool.html#claim(stormpot.Timeout)"><CODE>claim</CODE></A> method of a pool, in the form of being
 wrapped inside a <A HREF="../stormpot/PoolException.html" title="class in stormpot"><CODE>PoolException</CODE></A>. Pools must be able to handle these
 exceptions in a sane manner, and are guaranteed to return to a working
 state if an Allocator stops throwing exceptions from its allocate method.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>slot</CODE> - The slot the pool wish to allocate an object for.
 Implementors do not need to concern themselves with the details of a
 pools slot objects. They just have to call release on them as the
 protocol demands.
<DT><B>Returns:</B><DD>A newly created instance of T. Never <code>null</code>.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</A></CODE> - if the allocation fails.</DL>
</DD>
</DL>
<HR>

<A NAME="deallocate(stormpot.Poolable)"><!-- --></A><A NAME="deallocate(T)"><!-- --></A><H3>
deallocate</H3>
<PRE>
void <B>deallocate</B>(<A HREF="../stormpot/Allocator.html" title="type parameter in Allocator">T</A>&nbsp;poolable)
                throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</A></PRE>
<DL>
<DD>Deallocate, if applicable, the given Poolable and free any resources
 associated with it.
 <p>
 This is an opportunity to close any connections or files, flush buffers,
 empty caches or what ever might need to be done to completely free any
 resources represented by this Poolable.
 <p>
 Note that a Poolable must never touch its slot object after it has been
 deallocated.
 <p>
 Pools, on the other hand, will guarantee that the same object is never
 deallocated more than once.
 <p>
 Note that pools will always silently swallow exceptions thrown by the
 deallocate method. They do this because there is no knowing whether the
 deallocation of an object will be done synchronously by a thread calling
 <A HREF="../stormpot/Poolable.html#release()"><CODE>release</CODE></A> on a Poolable, or asynchronously by
 a clean-up thread inside the pool.
 <p>
 Deallocation from the release of an expired object, and deallocation from
 the shut down procedure of a <A HREF="../stormpot/LifecycledPool.html" title="interface in stormpot"><CODE>LifecycledPool</CODE></A> behave the same way
 in this regard. They will both silently swallow any exception thrown.
 <p>
 On the other hand, pools are guaranteed to otherwise correctly deal with
 any exception that might be thrown. The shut down procedure will still
 complete, and release will still maintain the internal data structures of
 the pool to make the slot available for new allocations.
 <p>
 If you need to somehow specially deal with the exceptions thrown by the
 deallocation of objects, then you should do this in the allocator itself,
 or in a wrapper around your allocator.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>poolable</CODE> - a non-null Poolable instance to be deallocated.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</A></CODE> - if the deallocation encounters an error.</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/Allocator.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../stormpot/Completion.html" title="interface in stormpot"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../index.html?stormpot/Allocator.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Allocator.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 2012. All Rights Reserved.
</BODY>
</HTML>
